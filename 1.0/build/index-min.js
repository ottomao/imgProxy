/*!build time : 2013-12-25 3:01:10 PM*/
KISSY.add("gallery/imgProxy/1.0/index",function(a,b){function c(a){var c='<object data="__swfUrl" type="application/x-shockwave-flash" id="imgproxy" width="100%" height="100%"><param name="allowScriptAccess" value="always"><param name="flashvars" value=""><param name="wmode" value="transparent"><param name="movie" value="__swfUrl"></object>',d=b(c.replace(/__swfUrl/g,g));a=b.one("#"+a),a.append(d),f=d.getDOMNode()}function d(){h||(h=!0,e=b("<div></div>").attr("id","imgproxy").css({height:1,position:"absolute",top:0,width:1}),b.one("body").append(e),c("imgproxy"))}var e,f,g="http://a.tbcdn.cn/s/kissy/gallery/drawingPad/2.0/ImgProxy.swf",h=!1,i=!1,j=0,k=[],l={};return window.imgproxy={load:function(a,b,c){if(!i)return k.push(Array.prototype.slice.call(arguments)),d(),void 0;var e=j++;this._callbacks(e,!0,b,c),f.load(e,a)},_callbacks:function(a,b,c,d){l[a]={single:b,success:c,error:d}},_onLoad:function(){var a;if(i=!0,k.length)for(a=0;a<k.length;a++)window.imgproxy.load.apply(this,k[a]);k=null},_onSuccess:function(a,b){var c=l[a].success;c&&c("data:image/png;base64,"+b),l[a].single&&delete l[a]},_onError:function(a,b){var c=l[a].error;c&&c(b),l[a].single&&delete l[a]}},window.imgproxy},{requires:["node","base"]});